CREATE TABLE roles (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(48) NOT NULL, UNIQUE INDEX UNIQ_B63E2EC75E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE hierarchicalrole_hierarchicalrole (hierarchicalrole_source INT NOT NULL, hierarchicalrole_target INT NOT NULL, INDEX IDX_5707BC75CD934D59 (hierarchicalrole_source), INDEX IDX_5707BC75D4761DD6 (hierarchicalrole_target), PRIMARY KEY(hierarchicalrole_source, hierarchicalrole_target)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE hierarchicalrole_permission (hierarchicalrole_id INT NOT NULL, permission_id INT NOT NULL, INDEX IDX_8D28B77E83B93C19 (hierarchicalrole_id), INDEX IDX_8D28B77EFED90CCA (permission_id), PRIMARY KEY(hierarchicalrole_id, permission_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE permissions (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(128) NOT NULL, UNIQUE INDEX UNIQ_2DEDCC6F5E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE acesso (id INT AUTO_INCREMENT NOT NULL, usuario_id INT NOT NULL, ip VARCHAR(255) NOT NULL, agente VARCHAR(255) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, INDEX IDX_2FA8F705DB38439E (usuario_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE usuario (id INT AUTO_INCREMENT NOT NULL, cliente_id INT DEFAULT NULL, nome VARCHAR(250) NOT NULL, email VARCHAR(255) NOT NULL, permissao VARCHAR(32) NOT NULL, password VARCHAR(128) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, INDEX IDX_2265B05DDE734E51 (cliente_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cliente (id INT AUTO_INCREMENT NOT NULL, nome VARCHAR(250) NOT NULL, credito NUMERIC(9, 2) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE hierarchicalrole_hierarchicalrole ADD CONSTRAINT FK_5707BC75CD934D59 FOREIGN KEY (hierarchicalrole_source) REFERENCES roles (id) ON DELETE CASCADE;
ALTER TABLE hierarchicalrole_hierarchicalrole ADD CONSTRAINT FK_5707BC75D4761DD6 FOREIGN KEY (hierarchicalrole_target) REFERENCES roles (id) ON DELETE CASCADE;
ALTER TABLE hierarchicalrole_permission ADD CONSTRAINT FK_8D28B77E83B93C19 FOREIGN KEY (hierarchicalrole_id) REFERENCES roles (id) ON DELETE CASCADE;
ALTER TABLE hierarchicalrole_permission ADD CONSTRAINT FK_8D28B77EFED90CCA FOREIGN KEY (permission_id) REFERENCES permissions (id) ON DELETE CASCADE;
ALTER TABLE acesso ADD CONSTRAINT FK_2FA8F705DB38439E FOREIGN KEY (usuario_id) REFERENCES usuario (id) ON DELETE RESTRICT;
ALTER TABLE usuario ADD CONSTRAINT FK_2265B05DDE734E51 FOREIGN KEY (cliente_id) REFERENCES cliente (id) ON DELETE CASCADE;
